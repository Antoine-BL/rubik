.container
  = render "shared/breadcrumb"
  = render "shared/flash_messages"

  - if agenda.errors.any?
    .alert.alert-danger{role: "alert"}
      - agenda.errors.each do |_, error|
        %span.glyphicon.glyphicon-exclamation-sign{"aria-hidden" => true}
        = error
        %br

  %h1.page-header= t(".title")

= form_for [@academic_degree_term, agenda] do |f|
  = render "shared/overview", f: f

  .container
    %fieldset
      %legend= f.label :courses
      %p= t(".mandatory_courses_explication_html")

      - mandatory_checkbox_name = "agenda[mandatory_course_ids][]"
      = hidden_field_tag mandatory_checkbox_name, nil, id: nil

      = f.collection_check_boxes :course_ids, agenda.academic_degree_term_courses, :id, :code do |ff|
        - id = ff.object.id
        - mandatory_course_id = "agenda_mandatory_course_ids_#{id}"

        .course-checkbox-button.btn-group.btn-group-justified{ role: "group" }
          = ff.check_box data: { :"child-checkbox" => mandatory_course_id }
          = ff.label(class: "btn btn-default") { ff.text }

          = check_box_tag mandatory_checkbox_name, id, agenda.mandatory_course_ids.include?(id), id: mandatory_course_id
          = label_tag mandatory_course_id, class: "btn btn-default" do
            %i.checked.fa.fa-lock
            %i.unchecked.fa.fa-unlock-alt

    %fieldset
      %legend= f.label :courses_per_schedule
      .btn-group.courses-per-schedule-group.btn-group-justified
        = f.collection_radio_buttons :courses_per_schedule, Agenda::COURSES_PER_SCHEDULE_RANGE, :to_i, :to_i do |ff|
          = ff.radio_button
          = ff.label(class: "btn btn-default")

    %a.schedules-anchor{name: "leaves"}
    %fieldset.form-horizontal
      %legend= f.label :leaves
      = f.nested_form :leaves
      = f.create_button :leaves, "+", class: "btn btn-default col-xs-12 col-sm-4 pull-right"

    = f.submit class: "col-xs-12 col-sm-4 pull-right btn btn-primary"
